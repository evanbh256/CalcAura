(()=>{var e={};e.id=178,e.ids=[178],e.modules={53524:e=>{"use strict";e.exports=require("@prisma/client")},67096:e=>{"use strict";e.exports=require("bcrypt")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},39491:e=>{"use strict";e.exports=require("assert")},14300:e=>{"use strict";e.exports=require("buffer")},6113:e=>{"use strict";e.exports=require("crypto")},82361:e=>{"use strict";e.exports=require("events")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},63477:e=>{"use strict";e.exports=require("querystring")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},59796:e=>{"use strict";e.exports=require("zlib")},49987:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>c.a,__next_app__:()=>u,originalPathname:()=>d,pages:()=>p,routeModule:()=>x,tree:()=>o}),a(67788),a(58567),a(35866);var r=a(23191),s=a(88716),l=a(37922),c=a.n(l),i=a(95231),n={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(n[e]=()=>i[e]);a.d(t,n);let o=["",{children:["profile",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,67788)),"C:\\Users\\DSU Student\\Desktop\\Stuff\\School\\Personal\\calcaura\\src\\app\\profile\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,58567)),"C:\\Users\\DSU Student\\Desktop\\Stuff\\School\\Personal\\calcaura\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,35866,23)),"next/dist/client/components/not-found-error"]}],p=["C:\\Users\\DSU Student\\Desktop\\Stuff\\School\\Personal\\calcaura\\src\\app\\profile\\page.tsx"],d="/profile/page",u={require:a,loadChunk:()=>Promise.resolve()},x=new r.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/profile/page",pathname:"/profile",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},41458:(e,t,a)=>{Promise.resolve().then(a.bind(a,51287))},51287:(e,t,a)=>{"use strict";a.d(t,{default:()=>c});var r=a(10326),s=a(17577);let l=(0,a(76557).Z)("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);function c(){let[e,t]=(0,s.useState)(!1),[a,c]=(0,s.useState)(!1),[i,n]=(0,s.useState)({type:"",text:""});async function o(e){e.preventDefault(),c(!0),n({type:"",text:""});let a=e.currentTarget,r=new FormData(a),s=r.get("currentPassword"),l=r.get("newPassword");try{let e=await fetch("/api/user/password",{method:"POST",body:JSON.stringify({currentPassword:s,newPassword:l}),headers:{"Content-Type":"application/json"}});if(!e.ok){let t=await e.json();throw Error(t.error||"Failed")}n({type:"success",text:"Password updated!"}),a.reset(),setTimeout(()=>t(!1),2e3)}catch(e){n({type:"error",text:e.message})}finally{c(!1)}}return(0,r.jsxs)("div",{className:"brutal-card mt-8",children:[(0,r.jsxs)("button",{onClick:()=>t(!e),className:"flex items-center gap-2 w-full text-left font-black uppercase",children:[r.jsx(l,{size:20})," Change Password"]}),e&&(0,r.jsxs)("form",{onSubmit:o,className:"mt-4 space-y-3",children:[i.text&&r.jsx("p",{className:`text-xs font-bold p-2 ${"error"===i.type?"bg-aura-loss text-white":"bg-aura-gain text-black"}`,children:i.text}),r.jsx("input",{name:"currentPassword",type:"password",placeholder:"Current Password",required:!0,className:"w-full bg-aura-black brutal-border-white p-2 text-sm font-bold focus:bg-aura-white focus:text-aura-black outline-none transition-colors"}),r.jsx("input",{name:"newPassword",type:"password",placeholder:"New Password",required:!0,className:"w-full bg-aura-black brutal-border-white p-2 text-sm font-bold focus:bg-aura-white focus:text-aura-black outline-none transition-colors"}),r.jsx("button",{type:"submit",disabled:a,className:"w-full brutal-button bg-aura-white text-aura-black text-xs py-2 uppercase hover:bg-aura-gain disabled:opacity-50",children:a?"Updating...":"Update Password"})]})]})}},67788:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>h});var r=a(19510),s=a(13538),l=a(75571),c=a(95456),i=a(58585),n=a(36478);let o=(0,n.Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),p=(0,n.Z)("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),d=(0,n.Z)("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]),u=(0,n.Z)("ScrollText",[["path",{d:"M8 21h12a2 2 0 0 0 2-2v-2H10v2a2 2 0 1 1-4 0V5a2 2 0 1 0-4 0v3h4",key:"13a6an"}],["path",{d:"M19 17V5a2 2 0 0 0-2-2H4",key:"zz82l3"}],["path",{d:"M15 8h-5",key:"1khuty"}],["path",{d:"M15 12h-5",key:"r7krc0"}]]),x=(0,a(68570).createProxy)(String.raw`C:\Users\DSU Student\Desktop\Stuff\School\Personal\calcaura\src\components\ChangePasswordForm.tsx#default`);async function h(){let e=await (0,l.getServerSession)(c.L);e||(0,i.redirect)("/login");let t=await s._.user.findUnique({where:{id:e.user.id},include:{reportsFiled:{orderBy:{createdAt:"desc"},take:5},reportsAgainst:{orderBy:{createdAt:"desc"},take:5}}});t||(0,i.redirect)("/login");let a=await s._.user.count({where:{auraScore:{gt:t.auraScore}}}),n=[...t.reportsFiled.map(e=>({...e,type:"FILED"})),...t.reportsAgainst.map(e=>({...e,type:"AGAINST"}))].sort((e,t)=>new Date(t.createdAt).getTime()-new Date(e.createdAt).getTime()).slice(0,5);return(0,r.jsxs)("div",{className:"space-y-8 pb-24",children:[(0,r.jsxs)("header",{className:"flex flex-col items-center gap-4 pt-8",children:[r.jsx("div",{className:"w-32 h-32 bg-aura-white brutal-border border-aura-white rounded-full flex items-center justify-center overflow-hidden",children:r.jsx(o,{size:64,className:"text-aura-black"})}),(0,r.jsxs)("div",{className:"text-center",children:[r.jsx("h1",{className:"text-3xl font-black uppercase tracking-tight",children:t.username}),(0,r.jsxs)("p",{className:"text-aura-gain font-bold uppercase",children:["Rank #",a+1," â€¢ Season 1"]})]})]}),(0,r.jsxs)("div",{className:"brutal-card text-center py-8 bg-aura-gain text-aura-black",children:[r.jsx("p",{className:"text-sm font-black uppercase mb-2",children:"Current Aura"}),r.jsx("p",{className:"text-6xl font-black tracking-tighter",children:t.auraScore})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{className:"brutal-card flex flex-col items-center gap-2",children:[r.jsx(p,{size:24,className:"text-aura-loss"}),r.jsx("span",{className:"text-2xl font-black",children:t.reportsAgainst.length}),r.jsx("span",{className:"text-[10px] font-bold uppercase text-center opacity-60",children:"Incidents Against"})]}),(0,r.jsxs)("div",{className:"brutal-card flex flex-col items-center gap-2",children:[r.jsx(d,{size:24,className:"text-aura-white"}),r.jsx("span",{className:"text-2xl font-black",children:t.reportsFiled.length}),r.jsx("span",{className:"text-[10px] font-bold uppercase text-center opacity-60",children:"Snitched Count"})]})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[r.jsx("h2",{className:"text-xl font-black uppercase border-b-4 border-aura-white inline-block",children:"Recent Activity"}),r.jsx("div",{className:"space-y-2",children:0===n.length?r.jsx("div",{className:"brutal-card opacity-50",children:r.jsx("p",{className:"text-center text-xs font-bold uppercase",children:"No recent activity"})}):n.map(e=>(0,r.jsxs)("div",{className:"brutal-card p-3 flex justify-between items-center",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:["FILED"===e.type?r.jsx(u,{size:16,className:"text-aura-gain"}):r.jsx(p,{size:16,className:"text-aura-loss"}),(0,r.jsxs)("div",{className:"flex flex-col",children:[r.jsx("span",{className:"text-xs font-bold uppercase",children:"FILED"===e.type?"You Reported":"Reported For"}),r.jsx("span",{className:"text-[10px] opacity-60 truncate max-w-[150px]",children:e.description})]})]}),(0,r.jsxs)("span",{className:`font-black ${e.auraAmount>0?"text-aura-gain":"text-aura-loss"}`,children:[e.auraAmount>0?"+":"",e.auraAmount]})]},e.id))})]}),r.jsx(x,{})]})}}};var t=require("../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),r=t.X(0,[276,790,970,297],()=>a(49987));module.exports=r})();